stargazer(gasto, ganancia, type = "text",
keep = "treatment",
covariate.labels = c("Treatment"),
dep.var.labels = c("Expenses",
"Profit"),
digits = 2,
title = "TABLE 3 -(Panel A)")
# Tabla
stargazer(gasto, ganancia, type = "text",
keep = "treatment",
covariate.labels = c("Treatment"),
dep.var.labels = c("Expenses",
"Profit"),
digits = 0,
title = "TABLE 3 -(Panel A)")
# 6. Mostrar tabla de resultados
stargazer(spandana, mfi, type = "text",
keep = "treatment",
covariate.labels = c("Tratamiento"),
dep.var.labels = c("Spandana",
"Cualquier MFI"),
digits = 4,
title = "Tabla 2- Crédito")
# Tabla
stargazer(gasto, ganancia, type = "text",
keep = "treatment",
covariate.labels = c("Treatment"),
dep.var.labels = c("Gasto",
"Ganancias"),
digits = 0,
title = "TABLA 3 -(Panel A)")
# Eliminar NA
data_clean <- data %>% filter(!is.na(anymfi_1), !is.na(treatment), !is.na(w1))
# tasas de cumplimiento por grupo
comp_rates <- data_clean %>%
group_by(treatment) %>%
summarise(tasa_cumplimiento = weighted.mean(anymfi_1, w = w1, na.rm = TRUE))
# calcular la diferencia (first stage)
first_stage <- comp_rates$tasa_cumplimiento[comp_rates$treatment == 1] -
comp_rates$tasa_cumplimiento[comp_rates$treatment == 0]
p <- first_stage
# Eliminar NA
data_exp <- data %>% filter(!is.na(total_exp_mo_pc_1))
data_prof <- data %>% filter(!is.na(bizprofit_1))
# Intention-to-Treat (ITT) esto compara todos los municipios tratados vs. control.
itt1_consumo <- lm(total_exp_mo_pc_1 ~ treatment, data = data_exp, weights = w1)
itt2_profit  <- lm(bizprofit_1 ~ treatment, data = data_prof, weights = w1)
# Guardar coeficientes ITT
itt_consumo_hat <- coef(itt1_consumo)["treatment"]
itt_profit_hat  <- coef(itt2_profit)["treatment"]
# LATE (Local Average Treatment Effect) es el efecto promedio para los individuos cuyo estatus de tratamiento está determinado por el instrumento
late1_consumo <- ivreg(total_exp_mo_pc_1 ~ anymfi_1 | treatment, weights = w1, data = data_exp)
late2_profit <- ivreg(bizprofit_1 ~ anymfi_1 | treatment, weights = w1, data = data_prof)
# Guardar coeficientes LATE
late_consumo_iv <- coef(late1_consumo)["anymfi_1"]
late_profit_iv  <- coef(late2_profit)["anymfi_1"]
# Agrupar errores por barrio ITT
coeftest(itt1_consumo, vcov = vcovCL(itt1_consumo, cluster = ~ areaid))
coeftest(itt2_profit, vcov = vcovCL(itt2_profit, cluster = ~ areaid))
# Agrupar errores por barrio LATE
coeftest(late1_consumo, vcov = vcovCL(late1_consumo, cluster = ~ areaid))
coeftest(late2_profit, vcov = vcovCL(late2_profit, cluster = ~ areaid))
# Matrices para cluster
matriz_ITT1   <- vcovCL(itt1_consumo, cluster = ~ areaid)
matriz_ITT2   <- vcovCL(itt2_profit, cluster = ~ areaid)
matriz_LATE1   <- vcovCL(late1_consumo, cluster = ~ areaid)
# Errores estandar
se_itt_consumo   <- sqrt(diag(matriz_ITT1))
se_late_consumo   <- sqrt(diag(matriz_LATE1))
# Tabla
stargazer(itt1_consumo, itt2_profit,late1_consumo, late2_profit,
type = "text",
se = list(se_itt_consumo,se_itt_profit,se_late_consumo,se_late_profit),
column.labels = c("ITT consumo","ITT Utilidad",
"LATE consumo", "LATE Utilidad"),
title = "Impacto del microcrédito con errores agrupados por barrio")
se_itt_profit  <- sqrt(diag(matriz_ITT2))
# Tabla
stargazer(itt1_consumo, itt2_profit,late1_consumo, late2_profit,
type = "text",
se = list(se_itt_consumo,se_itt_profit,se_late_consumo,se_late_profit),
column.labels = c("ITT consumo","ITT Utilidad",
"LATE consumo", "LATE Utilidad"),
title = "Impacto del microcrédito con errores agrupados por barrio")
se_late_profit   <- sqrt(diag(matriz_LATE2))
matriz_LATE2  <- vcovCL(late2_profit, cluster = ~ areaid)
se_late_profit   <- sqrt(diag(matriz_LATE2))
# Tabla
stargazer(itt1_consumo, itt2_profit,late1_consumo, late2_profit,
type = "text",
se = list(se_itt_consumo,se_itt_profit,se_late_consumo,se_late_profit),
column.labels = c("ITT consumo","ITT Utilidad",
"LATE consumo", "LATE Utilidad"),
title = "Impacto del microcrédito con errores agrupados por barrio")
# Tabla
stargazer(itt1_consumo, itt2_profit,late1_consumo, late2_profit,
type = "text",
se = list(se_itt_consumo,se_itt_profit,se_late_consumo,se_late_profit),
covariate.labels = c("", "")),
# Tabla
stargazer(itt1_consumo, itt2_profit,late1_consumo, late2_profit,
type = "text",
se = list(se_itt_consumo,se_itt_profit,se_late_consumo,se_late_profit),
covariate.labels = c("", ""),
column.labels = c("ITT consumo","ITT Utilidad",
"LATE consumo", "LATE Utilidad"),
title = "Impacto del microcrédito con errores agrupados por barrio")
# Tabla
stargazer(itt1_consumo, itt2_profit,late1_consumo, late2_profit,
type = "text",
dep.var.labels.include = FALSE,
dep.var.labels = NULL,
se = list(se_itt_consumo,se_itt_profit,se_late_consumo,se_late_profit),
column.labels = c("ITT consumo","ITT Utilidad",
"LATE consumo", "LATE Utilidad"),
title = "Impacto del microcrédito con errores agrupados por barrio")
# LATE manual
late_consumo_manual <- itt_consumo_hat / p
late_profit_manual  <- itt_profit_hat  / p
# Tabla final
tabla_resultados <- data.frame(
Outcome = c("Consumo", "Profit"),
ITT = c(itt_consumo_hat, itt_profit_hat),
Tasa_cumplimiento = c(p, p),
LATE_manual = c(late_consumo_manual, late_profit_manual),
LATE_IV = c(late_consumo_iv, late_profit_iv)
)
tabla_resultados
# Tabla final
tabla_resultados <- data.frame(
Outcome = c("Consumo", "Utilidad"),
ITT = c(itt_consumo_hat, itt_profit_hat),
Tasa_cumplimiento = c(p, p),
LATE_manual = c(late_consumo_manual, late_profit_manual),
LATE_IV = c(late_consumo_iv, late_profit_iv)
)
knitr::opts_chunk$set(echo = TRUE)
\-readr:::check_path(path)
readr:::check_path(path)
# Leer archivo .dta
data <- read_dta("data_endline_1and2.dta")
knitr::opts_knit$set(root.dir = getwd())
# Leer archivo .dta
data <- read_dta("data_endline_1and2.dta")
getwd()
knitr::opts_knit$set(root.dir = "C:/Users/mc-c2/OneDrive - Universidad de los andes/Universidad/MECA/Big Data y Machine Learning/Repositorios/BD_ML_taller_1/Taller-3-ExperimentoAleatorio")
# Leer archivo .dta
data <- read_dta("data_endline_1and2.dta")
list.files(pattern = "Taller3_CamilaCaraballo_LauraRivera.pdf")
rmarkdown::render("Taller3_CamilaCaraballo_LauraRivera.Rmd")
knitr::opts_knit$set(root.dir = "C:/Users/mc-c2/OneDrive - Universidad de los andes/Universidad/MECA/Big Data y Machine Learning/Repositorios/BD_ML_taller_1/Taller-3-ExperimentoAleatorio")
knitr::opts_chunk$set(
echo = FALSE,
message = FALSE,
warning = FALSE
)
knitr::opts_chunk$set(
echo = FALSE,
message = FALSE,
warning = FALSE
)
knitr::opts_knit$set(root.dir = "C:/Users/mc-c2/OneDrive - Universidad de los andes/Universidad/MECA/Big Data y Machine Learning/Repositorios/BD_ML_taller_1/Taller-3-ExperimentoAleatorio")
knitr::opts_chunk$set(
echo = FALSE,
message = FALSE,
warning = FALSE
)
knitr::opts_knit$set(root.dir = "C:/Users/mc-c2/OneDrive - Universidad de los andes/Universidad/MECA/Big Data y Machine Learning/Repositorios/BD_ML_taller_1/Taller-3-ExperimentoAleatorio")
stargazer(tabla_resultados,
summary = FALSE,
type = "latex",
title = "Resultados finales",
out = "tabla_resultados.tex")
library(stargazer)
stargazer(tabla_resultados,
summary = FALSE,
type = "latex",
title = "Resultados finales",
out = "tabla_resultados.tex")
stargazer(tabla_resultados,
summary = FALSE,
type = "text",
title = "Resultados finales",
out = "tabla_resultados.tex")
# Eliminar NA
data_exp <- data %>% filter(!is.na(total_exp_mo_pc_1))
library(dplyr)
# Eliminar NA
data_exp <- data %>% filter(!is.na(total_exp_mo_pc_1))
data_prof <- data %>% filter(!is.na(bizprofit_1))
# Intention-to-Treat (ITT) esto compara todos los municipios tratados vs. control.
itt1_consumo <- lm(total_exp_mo_pc_1 ~ treatment, data = data_exp, weights = w1)
itt2_profit  <- lm(bizprofit_1 ~ treatment, data = data_prof, weights = w1)
# Guardar coeficientes ITT
itt_consumo_hat <- coef(itt1_consumo)["treatment"]
itt_profit_hat  <- coef(itt2_profit)["treatment"]
# LATE (Local Average Treatment Effect) es el efecto promedio para los individuos cuyo estatus de tratamiento está determinado por el instrumento
late1_consumo <- ivreg(total_exp_mo_pc_1 ~ anymfi_1 | treatment, weights = w1, data = data_exp)
library(AER)
library(AER)
library(fixest)
library(lmtest)
library(tidyverse)
library(tidyverse)
library(stargazer)
library(survey)
# Eliminar NA
data_exp <- data %>% filter(!is.na(total_exp_mo_pc_1))
data_prof <- data %>% filter(!is.na(bizprofit_1))
# Intention-to-Treat (ITT) esto compara todos los municipios tratados vs. control.
itt1_consumo <- lm(total_exp_mo_pc_1 ~ treatment, data = data_exp, weights = w1)
itt2_profit  <- lm(bizprofit_1 ~ treatment, data = data_prof, weights = w1)
# Guardar coeficientes ITT
itt_consumo_hat <- coef(itt1_consumo)["treatment"]
itt_profit_hat  <- coef(itt2_profit)["treatment"]
# LATE (Local Average Treatment Effect) es el efecto promedio para los individuos cuyo estatus de tratamiento está determinado por el instrumento
late1_consumo <- ivreg(total_exp_mo_pc_1 ~ anymfi_1 | treatment, weights = w1, data = data_exp)
late2_profit <- ivreg(bizprofit_1 ~ anymfi_1 | treatment, weights = w1, data = data_prof)
# Guardar coeficientes LATE
late_consumo_iv <- coef(late1_consumo)["anymfi_1"]
late_profit_iv  <- coef(late2_profit)["anymfi_1"]
# Agrupar errores por barrio ITT
coeftest(itt1_consumo, vcov = vcovCL(itt1_consumo, cluster = ~ areaid))
coeftest(itt2_profit, vcov = vcovCL(itt2_profit, cluster = ~ areaid))
# Agrupar errores por barrio LATE
coeftest(late1_consumo, vcov = vcovCL(late1_consumo, cluster = ~ areaid))
library(haven)
library(plm)
library(plm)
library(scales)
library(scales)
library(skimr)
library(dplyr)
# Eliminar NA
data_exp <- data %>% filter(!is.na(total_exp_mo_pc_1))
data_prof <- data %>% filter(!is.na(bizprofit_1))
# Intention-to-Treat (ITT) esto compara todos los municipios tratados vs. control.
itt1_consumo <- lm(total_exp_mo_pc_1 ~ treatment, data = data_exp, weights = w1)
itt2_profit  <- lm(bizprofit_1 ~ treatment, data = data_prof, weights = w1)
# Guardar coeficientes ITT
itt_consumo_hat <- coef(itt1_consumo)["treatment"]
itt_profit_hat  <- coef(itt2_profit)["treatment"]
# LATE (Local Average Treatment Effect) es el efecto promedio para los individuos cuyo estatus de tratamiento está determinado por el instrumento
late1_consumo <- ivreg(total_exp_mo_pc_1 ~ anymfi_1 | treatment, weights = w1, data = data_exp)
late2_profit <- ivreg(bizprofit_1 ~ anymfi_1 | treatment, weights = w1, data = data_prof)
# Guardar coeficientes LATE
late_consumo_iv <- coef(late1_consumo)["anymfi_1"]
late_profit_iv  <- coef(late2_profit)["anymfi_1"]
# Agrupar errores por barrio ITT
coeftest(itt1_consumo, vcov = vcovCL(itt1_consumo, cluster = ~ areaid))
coeftest(itt2_profit, vcov = vcovCL(itt2_profit, cluster = ~ areaid))
# Agrupar errores por barrio LATE
coeftest(late1_consumo, vcov = vcovCL(late1_consumo, cluster = ~ areaid))
coeftest(late2_profit, vcov = vcovCL(late2_profit, cluster = ~ areaid))
# Matrices para cluster
matriz_ITT1   <- vcovCL(itt1_consumo, cluster = ~ areaid)
matriz_ITT2   <- vcovCL(itt2_profit, cluster = ~ areaid)
matriz_LATE1   <- vcovCL(late1_consumo, cluster = ~ areaid)
matriz_LATE2  <- vcovCL(late2_profit, cluster = ~ areaid)
# Errores estandar
se_itt_consumo   <- sqrt(diag(matriz_ITT1))
se_itt_profit  <- sqrt(diag(matriz_ITT2))
se_late_consumo   <- sqrt(diag(matriz_LATE1))
se_late_profit   <- sqrt(diag(matriz_LATE2))
# Tabla
stargazer(itt1_consumo, itt2_profit,late1_consumo, late2_profit,
type = "text",
dep.var.labels.include = FALSE,
dep.var.labels = NULL,
se = list(se_itt_consumo,se_itt_profit,se_late_consumo,se_late_profit),
column.labels = c("ITT consumo","ITT Utilidad",
"LATE consumo", "LATE Utilidad"),
title = "Impacto del microcrédito con errores agrupados por barrio")
# Tabla
stargazer(itt1_consumo, itt2_profit, late1_consumo, late2_profit,
type = "latex",
dep.var.labels.include = FALSE,
dep.var.labels = NULL,
se = list(se_itt_consumo, se_itt_profit, se_late_consumo, se_late_profit),
column.labels = c("ITT Consumo","ITT Utilidad",
"LATE Consumo", "LATE Utilidad"),
title = "Impacto del microcrédito con errores agrupados por barrio")
# Tabla
tabla3 <- stargazer(itt1_consumo, itt2_profit, late1_consumo, late2_profit,
type = "latex",
dep.var.labels.include = FALSE,
dep.var.labels = NULL,
se = list(se_itt_consumo, se_itt_profit, se_late_consumo, se_late_profit),
column.labels = c("ITT Consumo","ITT Utilidad",
"LATE Consumo", "LATE Utilidad"),
title = "Impacto del microcredito con errores agrupados por barrio")
# Eliminar NA
data_exp <- data %>% filter(!is.na(total_exp_mo_pc_1))
data_prof <- data %>% filter(!is.na(bizprofit_1))
# Intention-to-Treat (ITT) esto compara todos los municipios tratados vs. control.
itt1_consumo <- lm(total_exp_mo_pc_1 ~ treatment, data = data_exp, weights = w1)
itt2_profit  <- lm(bizprofit_1 ~ treatment, data = data_prof, weights = w1)
# Guardar coeficientes ITT
itt_consumo_hat <- coef(itt1_consumo)["treatment"]
itt_profit_hat  <- coef(itt2_profit)["treatment"]
# LATE (Local Average Treatment Effect) es el efecto promedio para los individuos cuyo estatus de tratamiento está determinado por el instrumento
late1_consumo <- ivreg(total_exp_mo_pc_1 ~ anymfi_1 | treatment, weights = w1, data = data_exp)
late2_profit <- ivreg(bizprofit_1 ~ anymfi_1 | treatment, weights = w1, data = data_prof)
# Guardar coeficientes LATE
late_consumo_iv <- coef(late1_consumo)["anymfi_1"]
late_profit_iv  <- coef(late2_profit)["anymfi_1"]
# Agrupar errores por barrio ITT
coeftest(itt1_consumo, vcov = vcovCL(itt1_consumo, cluster = ~ areaid))
coeftest(itt2_profit, vcov = vcovCL(itt2_profit, cluster = ~ areaid))
# Agrupar errores por barrio LATE
coeftest(late1_consumo, vcov = vcovCL(late1_consumo, cluster = ~ areaid))
coeftest(late2_profit, vcov = vcovCL(late2_profit, cluster = ~ areaid))
# Matrices para cluster
matriz_ITT1   <- vcovCL(itt1_consumo, cluster = ~ areaid)
matriz_ITT2   <- vcovCL(itt2_profit, cluster = ~ areaid)
matriz_LATE1   <- vcovCL(late1_consumo, cluster = ~ areaid)
matriz_LATE2  <- vcovCL(late2_profit, cluster = ~ areaid)
# Errores estandar
se_itt_consumo   <- sqrt(diag(matriz_ITT1))
se_itt_profit  <- sqrt(diag(matriz_ITT2))
se_late_consumo   <- sqrt(diag(matriz_LATE1))
se_late_profit   <- sqrt(diag(matriz_LATE2))
# Tabla
tabla3 <- stargazer(itt1_consumo, itt2_profit, late1_consumo, late2_profit,
type = "latex",
dep.var.labels.include = FALSE,
dep.var.labels = NULL,
se = list(se_itt_consumo, se_itt_profit, se_late_consumo, se_late_profit),
column.labels = c("ITT Consumo","ITT Utilidad",
"LATE Consumo", "LATE Utilidad"),
title = "Impacto del microcredito con errores agrupados por barrio")
knitr::opts_chunk$set(
echo = FALSE,
message = FALSE,
warning = FALSE,
results = 'hide'
)
knitr::opts_knit$set(root.dir = "C:/Users/mc-c2/OneDrive - Universidad de los andes/Universidad/MECA/Big Data y Machine Learning/Repositorios/BD_ML_taller_1/Taller-3-ExperimentoAleatorio")
# Tabla
tabla3 <- stargazer(itt1_consumo, itt2_profit, late1_consumo, late2_profit,
type = "text",
dep.var.labels.include = FALSE,
dep.var.labels = NULL,
se = list(se_itt_consumo, se_itt_profit, se_late_consumo, se_late_profit),
column.labels = c("ITT Consumo","ITT Utilidad",
"LATE Consumo", "LATE Utilidad"),
title = "Impacto del microcredito con errores agrupados por barrio")
knitr::opts_chunk$set(
echo = FALSE,
message = FALSE,
warning = FALSE
)
knitr::opts_knit$set(root.dir = "C:/Users/mc-c2/OneDrive - Universidad de los andes/Universidad/MECA/Big Data y Machine Learning/Repositorios/BD_ML_taller_1/Taller-3-ExperimentoAleatorio")
# Eliminar NA
data_exp <- data %>% filter(!is.na(total_exp_mo_pc_1))
data_prof <- data %>% filter(!is.na(bizprofit_1))
# Intention-to-Treat (ITT) esto compara todos los municipios tratados vs. control.
itt1_consumo <- lm(total_exp_mo_pc_1 ~ treatment, data = data_exp, weights = w1)
itt2_profit  <- lm(bizprofit_1 ~ treatment, data = data_prof, weights = w1)
# Guardar coeficientes ITT
itt_consumo_hat <- coef(itt1_consumo)["treatment"]
itt_profit_hat  <- coef(itt2_profit)["treatment"]
# LATE (Local Average Treatment Effect) es el efecto promedio para los individuos cuyo estatus de tratamiento está determinado por el instrumento
late1_consumo <- ivreg(total_exp_mo_pc_1 ~ anymfi_1 | treatment, weights = w1, data = data_exp)
late2_profit <- ivreg(bizprofit_1 ~ anymfi_1 | treatment, weights = w1, data = data_prof)
# Guardar coeficientes LATE
late_consumo_iv <- coef(late1_consumo)["anymfi_1"]
late_profit_iv  <- coef(late2_profit)["anymfi_1"]
# Agrupar errores por barrio ITT
coef_1 <- coeftest(itt1_consumo, vcov = vcovCL(itt1_consumo, cluster = ~ areaid))
coef_2 <- coeftest(itt2_profit, vcov = vcovCL(itt2_profit, cluster = ~ areaid))
# Agrupar errores por barrio LATE
coef_3 <- coeftest(late1_consumo, vcov = vcovCL(late1_consumo, cluster = ~ areaid))
coef_4 <- coeftest(late2_profit, vcov = vcovCL(late2_profit, cluster = ~ areaid))
# Matrices para cluster
matriz_ITT1   <- vcovCL(itt1_consumo, cluster = ~ areaid)
matriz_ITT2   <- vcovCL(itt2_profit, cluster = ~ areaid)
matriz_LATE1   <- vcovCL(late1_consumo, cluster = ~ areaid)
matriz_LATE2  <- vcovCL(late2_profit, cluster = ~ areaid)
# Errores estandar
se_itt_consumo   <- sqrt(diag(matriz_ITT1))
se_itt_profit  <- sqrt(diag(matriz_ITT2))
se_late_consumo   <- sqrt(diag(matriz_LATE1))
se_late_profit   <- sqrt(diag(matriz_LATE2))
# Tabla
tabla3 <- stargazer(itt1_consumo, itt2_profit, late1_consumo, late2_profit,
type = "latex",
dep.var.labels.include = FALSE,
dep.var.labels = NULL,
se = list(se_itt_consumo, se_itt_profit, se_late_consumo, se_late_profit),
column.labels = c("ITT Consumo","ITT Utilidad",
"LATE Consumo", "LATE Utilidad"),
title = "Impacto del microcrédito con errores agrupados por barrio")
# Eliminar NA
data_exp  <- data %>% filter(!is.na(total_exp_mo_pc_1))
data_prof <- data %>% filter(!is.na(bizprofit_1))
# Intention-to-Treat (ITT) modelos
itt1_consumo <- lm(total_exp_mo_pc_1 ~ treatment, data = data_exp, weights = w1)
itt2_profit  <- lm(bizprofit_1 ~ treatment, data = data_prof, weights = w1)
# Guardar coeficientes ITT
itt_consumo_hat <- coef(itt1_consumo)["treatment"]
itt_profit_hat  <- coef(itt2_profit)["treatment"]
# Local Average Treatment Effect (LATE) modelos con IV
late1_consumo <- ivreg(total_exp_mo_pc_1 ~ anymfi_1 | treatment,
weights = w1, data = data_exp)
late2_profit  <- ivreg(bizprofit_1 ~ anymfi_1 | treatment,
weights = w1, data = data_prof)
# Guardar coeficientes LATE
late_consumo_iv <- coef(late1_consumo)["anymfi_1"]
late_profit_iv  <- coef(late2_profit)["anymfi_1"]
# Matrices de varianzas-cluster
matriz_ITT1  <- vcovCL(itt1_consumo, cluster = ~ areaid)
matriz_ITT2  <- vcovCL(itt2_profit, cluster = ~ areaid)
matriz_LATE1 <- vcovCL(late1_consumo, cluster = ~ areaid)
matriz_LATE2 <- vcovCL(late2_profit, cluster = ~ areaid)
# Errores estándar agrupados
se_itt_consumo  <- sqrt(diag(matriz_ITT1))
se_itt_profit   <- sqrt(diag(matriz_ITT2))
se_late_consumo <- sqrt(diag(matriz_LATE1))
se_late_profit  <- sqrt(diag(matriz_LATE2))
# Tabla final con Stargazer
stargazer(itt1_consumo, itt2_profit, late1_consumo, late2_profit,
type = "latex",
dep.var.labels.include = FALSE,
dep.var.labels = NULL,
se = list(se_itt_consumo, se_itt_profit,
se_late_consumo, se_late_profit),
column.labels = c("ITT Consumo","ITT Utilidad",
"LATE Consumo", "LATE Utilidad"),
title = "Impacto del microcrédito con errores agrupados por barrio",
omit.stat = c("f","ser","rsq","adj.rsq","aic","bic","ll"))
# Cargar liberias y paquetes
#install.packages("haven") cual
#install.packages("plm")
#install.packages("skimr")
#install.packages("dplyr")
#install.packages("ggplot2")
#install.packages("modelsummary")
#install.packages("knitr")
#install.packages("tinytex")
#tinytex::install_tinytex()
#install.packages("survey")
library(knitr)
library(haven)
library(plm)
library(scales)
library(skimr)
library(dplyr)
library(ggplot2)
library(AER)
library(fixest)
library(lmtest)
library(sandwich)
library(tidyverse)
library(stargazer)
library(survey)
# Leer archivo .dta
data <- read_dta("data_endline_1and2.dta")
# Eliminar NA
data_inicial <- data %>% filter(!is.na(spandana_1))
# Filtrar solo hogares de Endline 1
data_inicial <- subset(data_inicial, sample1 == 1)
# Definir diseño muestral con pesos y clustering por área
design1 <- svydesign(
id = ~areaid,
weights = ~w1,
data = data_inicial
)
# Regresiones
spandana <- svyglm(
spandana_1 ~ treatment + area_debt_total_base + area_pop_base + area_business_total_base + area_exp_pc_mean_base + area_literate_head_base + area_literate_base,
design = design1,
family = gaussian()
)
mfi <- svyglm(
anymfi_1 ~ treatment + area_debt_total_base + area_pop_base + area_business_total_base + area_exp_pc_mean_base + area_literate_head_base + area_literate_base,
design = design1,
family = gaussian()
)
# 6. Mostrar tabla de resultados
stargazer(spandana, mfi, type = "text",
keep = "treatment",
covariate.labels = c("Tratamiento"),
dep.var.labels = c("Spandana",
"Cualquier MFI"),
digits = 4,
title = "Tabla 2- Crédito")
Sys.setlocale("LC_ALL", "es_CO.UTF-8")
# 6. Mostrar tabla de resultados
stargazer(spandana, mfi, type = "text",
keep = "treatment",
covariate.labels = c("Tratamiento"),
dep.var.labels = c("Spandana",
"Cualquier MFI"),
digits = 4,
title = "Tabla 2- Crédito")
# 6. Mostrar tabla de resultados
stargazer(spandana, mfi, type = "latex",
keep = "treatment",
covariate.labels = c("Tratamiento"),
dep.var.labels = c("Spandana",
"Cualquier MFI"),
digits = 4,
title = "Tabla 2- Crédito")
# Tabla
stargazer(gasto, ganancia, type = "latex",
keep = "treatment",
covariate.labels = c("Treatment"),
dep.var.labels = c("Gasto",
"Ganancias"),
digits = 0,
title = "TABLA 3 -(Panel A)")
